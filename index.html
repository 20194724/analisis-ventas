<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard de Ventas</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #FAFAF9;
  --white: #ffffff;
  --border: #E8E8E5;
  --text: #1A1A18;
  --text2: #5C5C58;
  --text3: #A0A09A;
  --blue: #2563EB;
  --blue-light: #EFF6FF;
  --orange: #C2410C;
  --orange-light: #FFF7ED;
  --green: #15803D;
  --green-light: #F0FDF4;
  --red: #B91C1C;
  --red-light: #FEF2F2;
  --proj: #8B5CF6;
  --pink: #DB2777;
  --pink-light: #FDF2F8;
  --teal: #0D9488;
  --teal-light: #F0FDFA;
  --radius: 10px;
  --shadow: 0 1px 3px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.03);
}

body { font-family: 'DM Sans', -apple-system, sans-serif; background: var(--bg); color: var(--text); font-size: 14px; line-height: 1.55; -webkit-font-smoothing: antialiased; }

.page { max-width: 980px; margin: 0 auto; padding: 52px 36px 96px; }
@media (max-width: 700px) { .page { padding: 28px 16px 72px; } }

/* Header */
.page-icon { font-size: 2.2rem; margin-bottom: 8px; }
.header-top { display: flex; align-items: flex-start; justify-content: space-between; gap: 16px; flex-wrap: wrap; margin-bottom: 40px; }
.page-title { font-size: clamp(1.5rem, 4vw, 2rem); font-weight: 600; letter-spacing: -0.03em; line-height: 1.15; }
.page-subtitle { color: var(--text3); font-size: 13px; margin-top: 5px; font-weight: 300; }
.header-date { background: var(--white); border: 1px solid var(--border); border-radius: 6px; padding: 6px 12px; font-size: 12px; color: var(--text2); white-space: nowrap; align-self: flex-start; }

/* KPIs */
.kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 40px; }
@media (max-width: 600px) { .kpi-grid { grid-template-columns: repeat(2, 1fr); } }
.kpi { background: var(--white); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px 18px; box-shadow: var(--shadow); }
.kpi-label { font-size: 10px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text3); margin-bottom: 5px; }
.kpi-value { font-size: 1.35rem; font-weight: 600; letter-spacing: -0.025em; line-height: 1.1; }
.kpi-sub { font-size: 11px; color: var(--text3); margin-top: 4px; font-weight: 300; }
.kpi-badge { display: inline-block; font-size: 10px; font-weight: 500; padding: 1px 6px; border-radius: 4px; margin-top: 5px; }
.b-green { background: var(--green-light); color: var(--green); }
.b-blue  { background: var(--blue-light); color: var(--blue); }
.b-red   { background: var(--red-light); color: var(--red); }

/* Divider */
hr.div { border: none; border-top: 1px solid var(--border); margin: 36px 0; }

/* Section */
.sec { margin-bottom: 40px; }
.sec-label { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.12em; color: var(--text3); margin-bottom: 4px; }
.sec-title { font-size: 1rem; font-weight: 500; color: var(--text); margin-bottom: 16px; }

/* Chart card */
.card { background: var(--white); border: 1px solid var(--border); border-radius: var(--radius); padding: 22px 22px 18px; box-shadow: var(--shadow); position: relative; }
.card-head { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 18px; gap: 12px; flex-wrap: wrap; }
.card-title { font-size: 13px; font-weight: 500; }
.card-sub   { font-size: 11px; color: var(--text3); margin-top: 2px; font-weight: 300; }
.legend { display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
.leg { display: flex; align-items: center; gap: 5px; font-size: 11px; color: var(--text2); }
.leg-line { width: 16px; height: 2px; border-radius: 1px; }
.leg-dash { width: 16px; height: 0; border-top: 2px dashed; }
.leg-sq   { width: 10px; height: 10px; border-radius: 3px; }

svg { display: block; width: 100%; overflow: visible; }

/* Tooltip */
.tt { position: absolute; background: var(--text); color: #fff; border-radius: 8px; padding: 9px 13px; font-size: 12px; pointer-events: none; opacity: 0; transition: opacity 0.12s; z-index: 30; white-space: nowrap; transform: translateX(-50%); box-shadow: 0 8px 20px rgba(0,0,0,0.18); }
.tt.show { opacity: 1; }
.tt-lbl { opacity: 0.5; font-size: 10px; margin-bottom: 2px; font-weight: 300; }
.tt-val { font-weight: 600; font-size: 13px; }
.tt-sub { opacity: 0.5; font-size: 10px; margin-top: 1px; }

/* Two col */
.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
@media (max-width: 680px) { .two-col { grid-template-columns: 1fr; } }

/* Three col */
.three-col { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; }
@media (max-width: 760px) { .three-col { grid-template-columns: 1fr; } }

/* Insight note */
.note { background: #F5F3FF; border: 1px solid rgba(139,92,246,0.2); border-radius: 8px; padding: 10px 14px; font-size: 11.5px; color: #5B21B6; margin-top: 14px; display: flex; gap: 8px; font-weight: 300; }
.note strong { font-weight: 500; }

/* Donut */
.donut-wrap { display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap; }
.donut-legend { display: flex; flex-direction: column; gap: 8px; }
.donut-leg-item { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--text2); }
.donut-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.donut-leg-val { font-weight: 500; color: var(--text); }

/* Bar rows */
.bar-row { display: flex; flex-direction: column; gap: 10px; }
.bar-item { display: flex; align-items: center; gap: 10px; font-size: 12px; }
.bar-item-label { min-width: 110px; color: var(--text2); font-size: 11px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 400; }
.bar-item-track { flex: 1; background: #F1F1EE; border-radius: 4px; height: 8px; overflow: hidden; }
.bar-item-fill  { height: 100%; border-radius: 4px; transition: width 0.6s ease; }
.bar-item-count { min-width: 28px; text-align: right; color: var(--text); font-weight: 500; font-size: 11px; }

/* Gender split bar */
.split-bar-wrap { margin-top: 10px; }
.split-bar { height: 10px; border-radius: 6px; overflow: hidden; display: flex; width: 100%; }
.split-bar-f { background: var(--pink); }
.split-bar-m { background: var(--blue); }
.split-labels { display: flex; justify-content: space-between; margin-top: 6px; font-size: 11px; color: var(--text2); }

/* Insight cards */
.insight-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
@media (max-width: 720px) { .insight-grid { grid-template-columns: 1fr; } }
.insight { background: var(--white); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px 18px; box-shadow: var(--shadow); }
.insight.warn { border-left: 3px solid #F59E0B; }
.insight.good { border-left: 3px solid #22C55E; }
.insight.info { border-left: 3px solid var(--blue); }
.insight-icon  { font-size: 1.1rem; margin-bottom: 8px; }
.insight-title { font-size: 12px; font-weight: 600; margin-bottom: 5px; letter-spacing: -0.01em; }
.insight-body  { font-size: 12px; color: var(--text2); line-height: 1.6; font-weight: 300; }
.insight-body strong { color: var(--text); font-weight: 500; }
</style>
</head>
<body>
<div class="page">

  <!-- ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ -->
  <div class="page-icon">üìä</div>
  <div class="header-top">
    <div>
      <h1 class="page-title">An√°lisis de Ventas</h1>
      <p class="page-subtitle">Noviembre 2025 ‚Äî Febrero 2026 ¬∑ 51 pedidos registrados</p>
    </div>
    <div class="header-date">Feb 22, 2026</div>
  </div>

  <!-- ‚îÄ‚îÄ KPIs ‚îÄ‚îÄ -->
  <div class="kpi-grid">
    <div class="kpi">
      <div class="kpi-label">Venta total</div>
      <div class="kpi-value">S/. 4,944</div>
      <div class="kpi-sub">12 semanas activas</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Mejor semana</div>
      <div class="kpi-value">S/. 923</div>
      <div class="kpi-sub">S10 ¬∑ 02‚Äì08 Feb</div>
      <div class="kpi-badge b-green">‚Üë pico hist√≥rico</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Crecimiento</div>
      <div class="kpi-value">+783%</div>
      <div class="kpi-sub">S1 vs. prom. √∫ltimas 4 sem.</div>
      <div class="kpi-badge b-green">tendencia al alza</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Prom. semanal</div>
      <div class="kpi-value">S/. 412</div>
      <div class="kpi-sub">√∫ltimas 4 sem: S/. 717</div>
      <div class="kpi-badge b-blue">acelerando</div>
    </div>
  </div>

  <hr class="div">

  <!-- ‚îÄ‚îÄ WEEKLY CHART ‚îÄ‚îÄ -->
  <div class="sec">
    <div class="sec-label">Ventas semanales</div>
    <div class="sec-title">Evoluci√≥n + proyecci√≥n pr√≥ximas 4 semanas</div>
    <div class="card">
      <div class="card-head">
        <div>
          <div class="card-title">Venta neta por semana (S/.)</div>
          <div class="card-sub">S1‚ÄìS12 hist√≥rico ¬∑ S13‚ÄìS16 proyecci√≥n por regresi√≥n lineal</div>
        </div>
        <div class="legend">
          <div class="leg"><div class="leg-line" style="background:var(--blue)"></div>Hist√≥rico</div>
          <div class="leg"><div class="leg-dash" style="border-color:var(--proj)"></div>Proyecci√≥n</div>
        </div>
      </div>
      <svg id="wsvg" viewBox="0 0 880 240" preserveAspectRatio="xMidYMid meet"></svg>
      <div class="tt" id="wtt"></div>
      <div class="note">
        <span>üîÆ</span>
        <span>Regresi√≥n sobre S7‚ÄìS12. <strong>S13 ‚âà S/. 748 ¬∑ S14 ‚âà S/. 819 ¬∑ S15 ‚âà S/. 890 ¬∑ S16 ‚âà S/. 961.</strong> Si el patr√≥n se mantiene, marzo podr√≠a superar <strong>S/. 3,400</strong>.</span>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ MONTHLY CHART ‚îÄ‚îÄ -->
  <div class="sec">
    <div class="sec-label">Ventas mensuales</div>
    <div class="sec-title">Comparativa por mes</div>
    <div class="card">
      <div class="card-head">
        <div>
          <div class="card-title">Venta neta por mes (S/.)</div>
          <div class="card-sub">Noviembre 2025 ‚Äî Febrero 2026</div>
        </div>
      </div>
      <svg id="msvg" viewBox="0 0 880 210" preserveAspectRatio="xMidYMid meet"></svg>
      <div class="tt" id="mtt"></div>
    </div>
  </div>

  <hr class="div">

  <!-- ‚îÄ‚îÄ PRODUCTS ‚îÄ‚îÄ -->
  <div class="sec">
    <div class="sec-label">Productos</div>
    <div class="sec-title">Frecuencia de venta por modelo</div>
    <div class="two-col">

      <!-- Top products bar -->
      <div class="card">
        <div class="card-head">
          <div>
            <div class="card-title">Modelos m√°s vendidos</div>
            <div class="card-sub">Unidades totales vendidas</div>
          </div>
        </div>
        <div class="bar-row" id="prod-bars"></div>
      </div>

      <!-- Products by gender -->
      <div class="card">
        <div class="card-head">
          <div>
            <div class="card-title">Top modelos por g√©nero</div>
            <div class="card-sub">Lo que m√°s compra cada segmento</div>
          </div>
        </div>
        <div style="margin-bottom:14px;">
          <div style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--pink);margin-bottom:8px;">‚ôÄ Mujeres</div>
          <div class="bar-row" id="fem-bars"></div>
        </div>
        <hr style="border:none;border-top:1px solid var(--border);margin:14px 0;">
        <div>
          <div style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--blue);margin-bottom:8px;">‚ôÇ Hombres</div>
          <div class="bar-row" id="mal-bars"></div>
        </div>
      </div>

    </div>
    <div class="note" style="margin-top:14px;">
      <span>üí°</span>
      <span>El <strong>OP-L-N 1200</strong> es por lejos el producto estrella (11 ventas, 21% del total). Concentra el inter√©s de ambos g√©neros. Los <strong>modelos 890</strong> aparecieron reci√©n en febrero, sugieren una l√≠nea nueva con potencial.</span>
    </div>
  </div>

  <hr class="div">

  <!-- ‚îÄ‚îÄ AUDIENCE ‚îÄ‚îÄ -->
  <div class="sec">
    <div class="sec-label">P√∫blico</div>
    <div class="sec-title">¬øQui√©n te compra?</div>
    <div class="three-col">

      <!-- Gender donut -->
      <div class="card">
        <div class="card-title" style="margin-bottom:16px;">G√©nero</div>
        <div class="donut-wrap">
          <svg viewBox="0 0 120 120" width="110" height="110" style="flex-shrink:0">
            <circle cx="60" cy="60" r="46" fill="none" stroke="#FDF2F8" stroke-width="18"/>
            <!-- Female: 26/51 = 50.98% = 183.5¬∞ -->
            <circle cx="60" cy="60" r="46" fill="none" stroke="var(--pink)" stroke-width="18"
              stroke-dasharray="146.6 142.8" stroke-dashoffset="36.5" stroke-linecap="butt"/>
            <!-- Male: 24/51 = 47.06% -->
            <circle cx="60" cy="60" r="46" fill="none" stroke="var(--blue)" stroke-width="18"
              stroke-dasharray="135.4 154" stroke-dashoffset="-110.1" stroke-linecap="butt"/>
            <!-- Unknown: 1 -->
            <circle cx="60" cy="60" r="46" fill="none" stroke="#E8E8E5" stroke-width="18"
              stroke-dasharray="9 280" stroke-dashoffset="-245.5" stroke-linecap="butt"/>
            <text x="60" y="56" text-anchor="middle" font-family="DM Sans,sans-serif" font-size="14" font-weight="600" fill="#1A1A18">51</text>
            <text x="60" y="70" text-anchor="middle" font-family="DM Sans,sans-serif" font-size="8" fill="#A0A09A">pedidos</text>
          </svg>
          <div class="donut-legend">
            <div class="donut-leg-item"><div class="donut-dot" style="background:var(--pink)"></div><div><div class="donut-leg-val">Mujeres</div><div>26 ¬∑ 51%</div></div></div>
            <div class="donut-leg-item"><div class="donut-dot" style="background:var(--blue)"></div><div><div class="donut-leg-val">Hombres</div><div>24 ¬∑ 47%</div></div></div>
            <div class="donut-leg-item"><div class="donut-dot" style="background:#E8E8E5"></div><div><div class="donut-leg-val">N/D</div><div>1 ¬∑ 2%</div></div></div>
          </div>
        </div>
      </div>

      <!-- Geography donut -->
      <div class="card">
        <div class="card-title" style="margin-bottom:16px;">Ubicaci√≥n</div>
        <div class="donut-wrap">
          <svg viewBox="0 0 120 120" width="110" height="110" style="flex-shrink:0">
            <circle cx="60" cy="60" r="46" fill="none" stroke="#F0FDFA" stroke-width="18"/>
            <!-- Province: 34/51 = 66.7% -->
            <circle cx="60" cy="60" r="46" fill="none" stroke="var(--teal)" stroke-width="18"
              stroke-dasharray="191.7 97.7" stroke-dashoffset="36.5" stroke-linecap="butt"/>
            <!-- Lima: 17/51 = 33.3% -->
            <circle cx="60" cy="60" r="46" fill="none" stroke="#F97316" stroke-width="18"
              stroke-dasharray="95.8 193.6" stroke-dashoffset="-155.2" stroke-linecap="butt"/>
            <text x="60" y="56" text-anchor="middle" font-family="DM Sans,sans-serif" font-size="14" font-weight="600" fill="#1A1A18">67%</text>
            <text x="60" y="70" text-anchor="middle" font-family="DM Sans,sans-serif" font-size="8" fill="#A0A09A">provincia</text>
          </svg>
          <div class="donut-legend">
            <div class="donut-leg-item"><div class="donut-dot" style="background:var(--teal)"></div><div><div class="donut-leg-val">Provincia</div><div>34 ¬∑ 67%</div></div></div>
            <div class="donut-leg-item"><div class="donut-dot" style="background:#F97316"></div><div><div class="donut-leg-val">Lima</div><div>17 ¬∑ 33%</div></div></div>
          </div>
        </div>
      </div>

      <!-- Gender x Location -->
      <div class="card">
        <div class="card-title" style="margin-bottom:16px;">G√©nero √ó Ubicaci√≥n</div>
        <div style="display:flex;flex-direction:column;gap:16px;">

          <div>
            <div style="display:flex;justify-content:space-between;font-size:11px;margin-bottom:5px;">
              <span style="color:var(--pink);font-weight:500;">‚ôÄ Mujeres (26)</span>
            </div>
            <div style="display:flex;height:10px;border-radius:6px;overflow:hidden;">
              <div style="width:23.1%;background:var(--pink);opacity:0.5;" title="Lima"></div>
              <div style="width:76.9%;background:var(--pink);" title="Provincia"></div>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--text3);margin-top:4px;">
              <span>Lima: 6 (23%)</span><span>Provincia: 20 (77%)</span>
            </div>
          </div>

          <div>
            <div style="display:flex;justify-content:space-between;font-size:11px;margin-bottom:5px;">
              <span style="color:var(--blue);font-weight:500;">‚ôÇ Hombres (24)</span>
            </div>
            <div style="display:flex;height:10px;border-radius:6px;overflow:hidden;">
              <div style="width:45.8%;background:var(--blue);opacity:0.5;" title="Lima"></div>
              <div style="width:54.2%;background:var(--blue);" title="Provincia"></div>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--text3);margin-top:4px;">
              <span>Lima: 11 (46%)</span><span>Provincia: 13 (54%)</span>
            </div>
          </div>

          <div style="background:var(--bg);border-radius:6px;padding:10px 12px;font-size:11px;color:var(--text2);line-height:1.6;">
            Las mujeres compran <strong>77% desde provincia</strong>. Los hombres est√°n m√°s distribuidos entre Lima y provincia (54/46).
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Couriers breakdown -->
  <div class="sec">
    <div class="sec-label">Cobertura geogr√°fica</div>
    <div class="sec-title">Distribuci√≥n por courier</div>
    <div class="card">
      <div class="card-head">
        <div class="card-title">Pedidos por courier ¬∑ Lima vs Provincia</div>
        <div class="card-sub">NOSOTROS + IN DRVER = Lima ¬∑ SHALOM + OLVA + DINSIDES = Provincia</div>
      </div>
      <div class="bar-row" id="courier-bars"></div>
    </div>
  </div>

  <hr class="div">

  <!-- ‚îÄ‚îÄ INSIGHTS ‚îÄ‚îÄ -->
  <div class="sec">
    <div class="sec-label">An√°lisis ¬∑ Lo que quiz√°s no est√°s viendo</div>
    <div class="sec-title">Hallazgos clave</div>
    <div class="insight-grid">

      <div class="insight warn">
        <div class="insight-icon">‚ö†Ô∏è</div>
        <div class="insight-title">Alta volatilidad semanal</div>
        <div class="insight-body">La desviaci√≥n est√°ndar es <strong>S/. 267</strong>. Hay dependencia de pedidos grandes puntuales (Tizhna S/. 277, Marco Moreno S/. 182). Sin ellos, varias semanas habr√≠an sido mediocres.</div>
      </div>

      <div class="insight good">
        <div class="insight-icon">üìà</div>
        <div class="insight-title">Febrero = 44% de todas las ventas</div>
        <div class="insight-body">Con solo 3 semanas, febrero super√≥ a los 3 meses anteriores combinados en ritmo de pedidos. El negocio <strong>no est√° estancado, est√° escalando</strong>.</div>
      </div>

      <div class="insight info">
        <div class="insight-icon">üåç</div>
        <div class="insight-title">Provincia es tu mercado principal</div>
        <div class="insight-body">El <strong>67% de tus clientes son de provincia</strong>, y las mujeres de provincia representan el segmento m√°s grande (39% del total). DINSIDES y SHALOM son tus couriers clave.</div>
      </div>

      <div class="insight warn">
        <div class="insight-icon">üóìÔ∏è</div>
        <div class="insight-title">Gap de enero: ~S/. 1,500 perdidos</div>
        <div class="insight-body">Tres semanas casi sin ventas entre el 22 Dic y el 26 Ene. Es predecible y evitable con una estrategia de preventa o campa√±a activa en esa ventana.</div>
      </div>

      <div class="insight info">
        <div class="insight-icon">üì¶</div>
        <div class="insight-title">OP-L-N 1200 es tu producto estrella</div>
        <div class="insight-body"><strong>21% de todas las ventas</strong> son de este modelo. Si hay un producto al que asegurarle stock, rebajas y promoci√≥n activa, es este. Lo compran tanto hombres como mujeres.</div>
      </div>

      <div class="insight good">
        <div class="insight-icon">üÜï</div>
        <div class="insight-title">Los modelos 890 son la nueva l√≠nea</div>
        <div class="insight-body">Aparecieron por primera vez en <strong>febrero</strong> con 5 ventas en pocas semanas. Si el precio es m√°s accesible, pueden atraer un segmento nuevo y aumentar volumen de pedidos.</div>
      </div>

    </div>
  </div>

</div>

<script>
const fmt  = n => Math.round(n).toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');
const fmtD = n => n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,',');

/* ‚îÄ‚îÄ DATA ‚îÄ‚îÄ */
const weekly = [
  {s:"S1", rango:"10‚Äì16 Nov 25", pedidos:1, total:80,    proj:false},
  {s:"S2", rango:"17‚Äì23 Nov 25", pedidos:2, total:50,    proj:false},
  {s:"S3", rango:"24‚Äì30 Nov 25", pedidos:5, total:457.7, proj:false},
  {s:"S4", rango:"01‚Äì07 Dic 25", pedidos:3, total:457,   proj:false},
  {s:"S5", rango:"08‚Äì14 Dic 25", pedidos:2, total:195,   proj:false},
  {s:"S6", rango:"15‚Äì21 Dic 25", pedidos:6, total:569.2, proj:false},
  {s:"S7", rango:"22‚Äì28 Dic 25", pedidos:2, total:173.5, proj:false},
  {s:"S8", rango:"12‚Äì18 Ene 26", pedidos:1, total:94,    proj:false},
  {s:"S9", rango:"26 Ene‚Äì01 Feb",pedidos:7, total:676.2, proj:false},
  {s:"S10",rango:"02‚Äì08 Feb 26", pedidos:8, total:923.4, proj:false},
  {s:"S11",rango:"09‚Äì15 Feb 26", pedidos:6, total:560.3, proj:false},
  {s:"S12",rango:"16‚Äì22 Feb 26", pedidos:8, total:707.2, proj:false},
  {s:"S13",rango:"23 Feb‚Äì01 Mar",pedidos:null,total:748, proj:true},
  {s:"S14",rango:"02‚Äì08 Mar 26", pedidos:null,total:819, proj:true},
  {s:"S15",rango:"09‚Äì15 Mar 26", pedidos:null,total:890, proj:true},
  {s:"S16",rango:"16‚Äì22 Mar 26", pedidos:null,total:961, proj:true},
];

const monthly = [
  {m:"Nov",nombre:"Noviembre 2025",pedidos:8, total:587.7},
  {m:"Dic",nombre:"Diciembre 2025",pedidos:13,total:1394.2},
  {m:"Ene",nombre:"Enero 2026",   pedidos:8, total:770.2},
  {m:"Feb",nombre:"Febrero 2026", pedidos:22,total:2191.4},
];

const products = [
  {name:"OP-L-N 1200",count:11},{name:"OP-L-B 1200",count:5},
  {name:"JJK-N 1200",count:4},{name:"CSM-B 1200",count:4},
  {name:"DS-N 1200",count:4},{name:"N-N 1200",count:4},
  {name:"PERSONALIZADO",count:4},{name:"DS-B 1200",count:3},
];

const femProds = [
  {name:"OP-L-N 1200",count:5},{name:"OP-L-B 1200",count:3},
  {name:"CSM-B 1200",count:2},{name:"DS-N 1200",count:2},{name:"DS-B 1200",count:2},
];
const malProds = [
  {name:"OP-L-N 1200",count:6},{name:"N-N 1200",count:3},
  {name:"JJK-N 1200",count:3},{name:"PERSONALIZADO",count:2},{name:"DS-N 1200",count:2},
];

const couriers = [
  {name:"DINSIDES",count:14,geo:"provincia"},{name:"NOSOTROS",count:11,geo:"lima"},
  {name:"SHALOM",count:11,geo:"provincia"},{name:"OLVA",count:9,geo:"provincia"},
  {name:"IN DRVER",count:6,geo:"lima"},
];

/* ‚îÄ‚îÄ BAR ROWS ‚îÄ‚îÄ */
function renderBars(containerId, data, maxCount, color, colorFn) {
  const el = document.getElementById(containerId);
  if (!el) return;
  el.innerHTML = data.map(d => {
    const pct = (d.count / maxCount * 100).toFixed(1);
    const c = colorFn ? colorFn(d) : color;
    return `<div class="bar-item">
      <div class="bar-item-label">${d.name}</div>
      <div class="bar-item-track"><div class="bar-item-fill" style="width:${pct}%;background:${c}"></div></div>
      <div class="bar-item-count">${d.count}</div>
    </div>`;
  }).join('');
}

renderBars('prod-bars', products, 11, '#2563EB');
renderBars('fem-bars',  femProds, 6, 'var(--pink)');
renderBars('mal-bars',  malProds, 6, 'var(--blue)');
renderBars('courier-bars', couriers, 14, null, d => d.geo === 'lima' ? '#F97316' : 'var(--teal)');

/* ‚îÄ‚îÄ WEEKLY LINE CHART ‚îÄ‚îÄ */
(function(){
  const svg = document.getElementById('wsvg');
  const W=880,H=240,pl=50,pr=20,pt=20,pb=36;
  const cW=W-pl-pr, cH=H-pt-pb;
  const maxV = Math.max(...weekly.map(d=>d.total))*1.18;
  const n=weekly.length;
  const xp=i=>pl+(i/(n-1))*cW;
  const yp=v=>pt+cH-(v/maxV)*cH;
  const hist=weekly.filter(d=>!d.proj);
  const hi=hist.length-1;

  let h=`<defs>
    <linearGradient id="hg" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#2563EB" stop-opacity="0.1"/>
      <stop offset="100%" stop-color="#2563EB" stop-opacity="0"/>
    </linearGradient>
    <linearGradient id="pg" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#8B5CF6" stop-opacity="0.07"/>
      <stop offset="100%" stop-color="#8B5CF6" stop-opacity="0"/>
    </linearGradient>
  </defs>`;

  [0,.25,.5,.75,1].forEach(f=>{
    const y=yp(maxV*f);
    h+=`<line x1="${pl}" y1="${y}" x2="${W-pr}" y2="${y}" stroke="#EBEBEA" stroke-width="1"/>`;
    if(f>0) h+=`<text x="${pl-6}" y="${y+4}" fill="#C8C8C2" font-size="9" text-anchor="end" font-family="DM Sans,sans-serif">${fmt(maxV*f)}</text>`;
  });

  let hArea=`M${xp(0)},${pt+cH}`;
  hist.forEach((_,i)=>hArea+=` L${xp(i)},${yp(hist[i].total)}`);
  hArea+=` L${xp(hi)},${pt+cH}Z`;
  h+=`<path d="${hArea}" fill="url(#hg)"/>`;

  let pArea=`M${xp(hi)},${pt+cH} L${xp(hi)},${yp(weekly[hi].total)}`;
  for(let i=hist.length;i<n;i++) pArea+=` L${xp(i)},${yp(weekly[i].total)}`;
  pArea+=` L${xp(n-1)},${pt+cH}Z`;
  h+=`<path d="${pArea}" fill="url(#pg)"/>`;

  h+=`<path d="${hist.map((_,i)=>`${i?'L':'M'}${xp(i)},${yp(hist[i].total)}`).join(' ')}" fill="none" stroke="#2563EB" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/>`;

  let pLine=`M${xp(hi)},${yp(weekly[hi].total)}`;
  for(let i=hist.length;i<n;i++) pLine+=` L${xp(i)},${yp(weekly[i].total)}`;
  h+=`<path d="${pLine}" fill="none" stroke="#8B5CF6" stroke-width="2" stroke-dasharray="5,4" stroke-linejoin="round" stroke-linecap="round"/>`;

  const dx=xp(hi);
  h+=`<line x1="${dx}" y1="${pt}" x2="${dx}" y2="${pt+cH}" stroke="#E0E0DC" stroke-width="1" stroke-dasharray="3,3"/>`;
  h+=`<text x="${dx+5}" y="${pt+11}" fill="#C0C0BA" font-size="8.5" font-family="DM Sans,sans-serif">proyecci√≥n ‚Üí</text>`;

  weekly.forEach((d,i)=>{
    const x=xp(i),y=yp(d.total),c=d.proj?'#8B5CF6':'#2563EB';
    h+=`<circle cx="${x}" cy="${y}" r="${d.proj?3:3.5}" fill="${d.proj?'white':c}" stroke="${c}" stroke-width="${d.proj?1.5:0}"/>`;
    h+=`<circle cx="${x}" cy="${y}" r="10" fill="transparent" class="wpt" data-i="${i}" style="cursor:default"/>`;
    h+=`<text x="${x}" y="${H-pb+13}" fill="${d.proj?'#C8C8C2':'#B0B0AA'}" font-size="8.5" text-anchor="middle" font-family="DM Sans,sans-serif">${d.s}</text>`;
  });

  svg.innerHTML=h;
  const tt=document.getElementById('wtt');
  svg.querySelectorAll('.wpt').forEach(el=>{
    el.addEventListener('mouseenter',()=>{
      const i=+el.getAttribute('data-i'),d=weekly[i];
      const r=svg.getBoundingClientRect();
      const x=xp(i)/W*r.width, y=yp(d.total)/H*r.height;
      tt.innerHTML=`<div class="tt-lbl">${d.s} ¬∑ ${d.rango}</div><div class="tt-val">S/. ${fmtD(d.total)}</div><div class="tt-sub">${d.proj?'üîÆ proyecci√≥n':d.pedidos+' pedidos'}</div>`;
      tt.style.left=x+'px'; tt.style.top=(y-64)+'px'; tt.classList.add('show');
    });
    el.addEventListener('mouseleave',()=>tt.classList.remove('show'));
  });
})();

/* ‚îÄ‚îÄ MONTHLY BAR CHART ‚îÄ‚îÄ */
(function(){
  const svg=document.getElementById('msvg');
  const W=880,H=210,pl=50,pr=20,pt=18,pb=42;
  const cW=W-pl-pr,cH=H-pt-pb;
  const maxV=Math.max(...monthly.map(d=>d.total))*1.18;
  const slot=cW/monthly.length,bw=slot*0.35;
  const yp=v=>pt+cH-(v/maxV)*cH;

  let h=`<defs><linearGradient id="og" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#EA580C" stop-opacity="0.9"/>
    <stop offset="100%" stop-color="#EA580C" stop-opacity="0.5"/>
  </linearGradient></defs>`;

  [0,.25,.5,.75,1].forEach(f=>{
    const y=yp(maxV*f);
    h+=`<line x1="${pl}" y1="${y}" x2="${W-pr}" y2="${y}" stroke="#EBEBEA" stroke-width="1"/>`;
    if(f>0) h+=`<text x="${pl-6}" y="${y+4}" fill="#C8C8C2" font-size="9" text-anchor="end" font-family="DM Sans,sans-serif">${fmt(maxV*f)}</text>`;
  });

  monthly.forEach((d,i)=>{
    const bh=(d.total/maxV)*cH;
    const x=pl+i*slot+(slot-bw)/2, y=yp(d.total);
    h+=`<rect x="${x}" y="${y}" width="${bw}" height="${bh}" fill="url(#og)" rx="5"/>`;
    h+=`<rect x="${pl+i*slot}" y="${pt}" width="${slot}" height="${cH}" fill="transparent" class="mpt" data-i="${i}" style="cursor:default"/>`;
    h+=`<text x="${x+bw/2}" y="${H-pb+16}" fill="#AEAEA8" font-size="11.5" text-anchor="middle" font-family="DM Sans,sans-serif" font-weight="500">${d.m}</text>`;
    h+=`<text x="${x+bw/2}" y="${y-7}" fill="#EA580C" font-size="9.5" text-anchor="middle" font-family="DM Sans,sans-serif" font-weight="500">S/. ${fmt(d.total)}</text>`;
    if(bh>26) h+=`<text x="${x+bw/2}" y="${y+bh/2+4}" fill="white" font-size="9" text-anchor="middle" font-family="DM Sans,sans-serif" opacity="0.9">${d.pedidos} ped.</text>`;
  });

  svg.innerHTML=h;
  const tt=document.getElementById('mtt');
  svg.querySelectorAll('.mpt').forEach(el=>{
    el.addEventListener('mouseenter',()=>{
      const i=+el.getAttribute('data-i'),d=monthly[i];
      const cx=pl+i*slot+slot/2, cy=yp(d.total);
      const r=svg.getBoundingClientRect();
      tt.innerHTML=`<div class="tt-lbl">${d.nombre}</div><div class="tt-val">S/. ${fmtD(d.total)}</div><div class="tt-sub">${d.pedidos} pedidos</div>`;
      tt.style.left=(cx/880*r.width)+'px'; tt.style.top=((cy/210*r.height)-64)+'px'; tt.classList.add('show');
    });
    el.addEventListener('mouseleave',()=>tt.classList.remove('show'));
  });
})();
</script>
</body>
</html>
